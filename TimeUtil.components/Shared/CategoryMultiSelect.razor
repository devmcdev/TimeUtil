<MudSelect T="string"
           Label="Categories"
           MultiSelection="true"
           SelectAll="true"
           SelectedValues="SelectedCategories"
           SelectedValuesChanged="SelectedCategoriesChanged"
           AdornmentIcon="@Icons.Material.Filled.Search"
           HelperText="@HelpText"
           SelectAllText="@SelectAllText"
           Text="@GetMultiSelectionText()"
>
    @foreach (string category in Categories)
    {
        <MudSelectItem @key="category" T="string" Value="@category">@category</MudSelectItem>
    }
</MudSelect>

@code {
    [Parameter, EditorRequired] public IEnumerable<string> Categories { get; set; } = Enumerable.Empty<string>();
    [Parameter] public IEnumerable<string>? SelectedCategories { get; set; }
    [Parameter] public EventCallback<IEnumerable<string>?> SelectedCategoriesChanged { get; set; }
    [Parameter] public string? HelpText { get; set; }
    [Parameter] public string? SelectAllText { get; set; } = "Select all";


    private string? GetMultiSelectionText()
    {
        int count = SelectedCategories?.Count() ?? 0;
        if(count == 0)
        {
            return null;
        }
        return $"{count} categor{(count > 1 ? "ies have" : "y has")} been selected";
    }

}
